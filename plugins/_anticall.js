const delay = time => new Promise(res => setTimeout(res, time));

export async function before(m, { conn, isAdmin, isBotAdmin, isOwner, isROwner }) {
    let bot = global.db.data.settings[this.user.jid] || {};

    // ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูุงุฏูุฉ ูู ููุชุจุฉ "Baileys" ุฃู ุฅุฐุง ูุงูุช ุฏุฑุฏุดุฉ antiCall ูุนุทูุฉ.
    if (m.isBaileys) return;
    if (!bot.antiCall) return;

    // ุฅูุดุงุก ุฑุณุงูุฉ ุชุฐููุฑ ุจุงููุฑุณู ููุฑุณุงูุฉ ุงููุงุฑุฏุฉ.
    const mentionSender = `๐งโโ๏ธ @${m.sender.split('@')[0]} ๐งโโ๏ธ`;

    // ุชุญุฏูุฏ ุฃููุงุน ุงูุฑุณุงุฆู ุงููุฎุชููุฉ ูุฑุณุงุฆููุง ุงูููุงุจูุฉ.
    const messageType = {
        40: '๐ ููุฏ ูุงุชู ููุงููุฉ ุตูุชูุฉุ ูููุฏ ุชู ุชูููุช ุงูููุงููุฉ.',
        41: '๐น ููุฏ ูุงุชู ููุงููุฉ ููุฏููุ ูููุฏ ุชู ุชูููุช ุงูููุงููุฉ.',
        45: '๐ ููุฏ ูุงุชู ููุงููุฉ ุตูุชูุฉ ูู ุงููุฌููุนุฉุ ูููุฏ ุชู ุชูููุช ุงูููุงููุฉ.',
        46: '๐น ููุฏ ูุงุชู ููุงููุฉ ููุฏูู ูู ุงููุฌููุนุฉุ ูููุฏ ุชู ุชูููุช ุงูููุงููุฉ.'
    }[m.messageStubType];

    // ุฅุฐุง ุชู ุงูุนุซูุฑ ุนูู ููุน ุงูุฑุณุงูุฉุ ุฃุฑุณู ุฑุณุงูุฉ ุฅูู ุงูุฏุฑุฏุดุฉ.
    if (messageType) {
        // ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฐููุฑ ุจุงููุฑุณู ูููุน ุงูุฑุณุงูุฉ.
        await conn.sendMessage(m.chat, { text: `ุชู ููุนู ูู ุงุณุชุฎุฏุงู ุงูุจูุช ุจุณุจุจ ุฎุฑู ูุงุญุฏ ููุงููู ุงูุจูุช *"ูููุน ุงูุงุชุตุงู ุจ ุงูุจูุช ููุงููุฉ ุตูุชูุฉ"* ุฌุฑุจ ุงูุงุชุตุงู ุง ุจ ุงุญุฏ ุงููุทูุฑูู ู ุฑูุน ุงูุญุถุฑ.`, mentions: [m.sender] });

        // ุฅุฑุณุงู ุฑุณุงูุฉ ุชุญุฐูุฑ ุชุดูุฑ ุฅูู ุฃู ุงููุณุชุฎุฏู ูุฏ ุชู ุญุธุฑู ูุญุธุฑู ูุชุญุฐูุฑู ูุทุฑุฏู.

        // ุงูุงูุชุธุงุฑ ููุชุฑุฉ ูุนููุฉ.
        await delay(1000);

        // ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู ุฅูู ูุญุธูุฑ ูููุญูู ุชุญุฐูุฑ.
        global.db.data.users[m.sender].banned = true;
        global.db.data.users[m.sender].warning = 1;

        // ุญุธุฑ ุงููุณุชุฎุฏู ูู ุฅุฑุณุงู ุงูุฑุณุงุฆู ุฅูู ุงูุจูุช.
        await conn.updateBlockStatus(m.sender, "block");

        // ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูุงุฏูุฉ ูู ูุฌููุนุฉุ ูู ุจุฅุฒุงูุฉ ุงููุฑุณู ูู ุงููุฌููุนุฉ.
        if (m.isGroup) {
            await conn.groupParticipantsUpdate(m.chat, [m.sender], "remove");
        }
    } else {
        // ุฅุฐุง ูู ูุชู ุงูุชุนุฑู ุนูู ููุน ุงูุฑุณุงูุฉุ ูู ุจุชุณุฌูู ูุนูููุงุช ุญูููุง.
        console.log({ messageStubType: m.messageStubType, messageStubParameters: m.messageStubParameters, type: m.messageStubType });
    }
}

// ุชุนุทูู ุงูุฃูุฑ ุฅุฐุง ูุงูุช ุงููููุฉ ูุชุงุญุฉ ูุชููู true.
export const disabled = false;